"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7678],{7678:(Y,g,l)=>{l.r(g),l.d(g,{EditarSalonPageModule:()=>A});var m=l(6814),r=l(6223),s=l(9843),d=l(1896),u=l(5861),f=l(553),e=l(5879),p=l(7203),h=l(3429),_=l(4726),b=l(2363);function S(o,a){if(1&o&&e._UZ(0,"img",25),2&o){const n=e.oxw(3);e.Q6J("src",n.url+"/upload/salones/default.jpg"+n.salon.img,e.LSH)}}function v(o,a){if(1&o&&e._UZ(0,"img",25),2&o){const n=e.oxw(3);e.Q6J("src",n.url+"/upload/salones/"+n.salon.img,e.LSH)}}function x(o,a){if(1&o&&e._UZ(0,"img",26),2&o){const n=e.oxw(3);e.Q6J("src",n.imgTemp,e.LSH)("alt",n.salon.nombre)}}function T(o,a){if(1&o&&(e.ynx(0),e.YNc(1,S,1,1,"img",23),e.YNc(2,v,1,1,"img",23),e.YNc(3,x,1,2,"img",24),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",""===n.salon.img&&!n.imgTemp),e.xp6(1),e.Q6J("ngIf",""!==n.salon.img&&!n.imgTemp),e.xp6(1),e.Q6J("ngIf",""!==n.salon.img&&n.imgTemp)}}function Z(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"ion-col",8)(1,"ion-item",18)(2,"div",19)(3,"ion-label"),e._uU(4,"Imagen"),e.qZA(),e.TgZ(5,"label",20),e.YNc(6,T,4,3,"ng-container",21),e.qZA(),e.TgZ(7,"input",22),e.NdJ("change",function(t){e.CHM(n);const c=e.oxw();return e.KtG(c.cambiarImagen(t))}),e.qZA()()()()}if(2&o){const n=e.oxw();e.xp6(6),e.Q6J("ngIf",n.salon)}}function E(o,a){if(1&o&&e._UZ(0,"img",29),2&o){const n=e.oxw(3);e.Q6J("src",n.url+"/upload/salones/"+n.salon.img,e.LSH)("alt",n.salon.nombre)("title",n.salon.nombre)}}function y(o,a){if(1&o&&e._UZ(0,"img",29),2&o){const n=e.oxw(3);e.Q6J("src",n.url+"/upload/salones/default.jpg",e.LSH)("alt",n.salon.nombre)("title",n.salon.nombre)}}function I(o,a){if(1&o&&(e.ynx(0),e.YNc(1,E,1,3,"img",28),e.YNc(2,y,1,3,"img",28),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",""!==n.salon.img),e.xp6(1),e.Q6J("ngIf",""===n.salon.img)}}function J(o,a){if(1&o){const n=e.EpF();e.TgZ(0,"ion-col",8)(1,"ion-item",18)(2,"div",19)(3,"ion-label"),e._uU(4,"Imagen"),e.qZA(),e.TgZ(5,"label",20),e.YNc(6,I,3,2,"ng-container",21),e.qZA(),e.TgZ(7,"input",27),e.NdJ("change",function(t){e.CHM(n);const c=e.oxw();return e.KtG(c.cambiarImagen(t))}),e.qZA()()()()}if(2&o){const n=e.oxw();e.xp6(6),e.Q6J("ngIf",n.salon),e.xp6(1),e.Q6J("disabled","false"===n.edit)}}function P(o,a){if(1&o&&(e.TgZ(0,"ion-col",15)(1,"ion-button",30),e._uU(2," Editar "),e.qZA()()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("disabled",n.salonForm.invalid)}}const Q=[{path:"",component:(()=>{var o;class a{constructor(i,t,c,q,C){this.functionsService=i,this.route=t,this.salonsService=c,this.fb=q,this.fileService=C,this.today=this.functionsService.getToday(),this.formSubmitted=!1,this.cargando=!1,this.url=f.N.base_url,this.imgTemp=void 0,this.createForm(),this.id=this.route.snapshot.params.id,this.edit=this.route.snapshot.params.edit,this.getId(this.id),this.offLoading()}ngOnInit(){}getId(i){this.salonsService.cargarSalonById(i).subscribe(t=>{this.onLoading(),this.salon=t.salon,this.setForm(this.salon),this.offLoading()},t=>{this.offLoading()})}get errorControl(){return this.salonForm.controls}createForm(){this.salonForm=this.fb.group({nombre:["",[r.kI.required]],direccion:["",[r.kI.required]],lat:[""],long:[""],telefono:[0,[r.kI.required]],activated:[!1],dateCreated:[this.today],lastEdited:[this.today]})}onSubmit(){if(this.onLoading(),!this.salonForm.valid)return this.functionsService.presentToast("bottom","Por favor completa el formulario","danger"),void this.offLoading();this.salon={...this.salon,...this.salonForm.value},console.log("this.salon::: ",this.salon),this.salonsService.actualizarSalon(this.salon).subscribe(i=>{this.functionsService.presentToast("bottom","Salon Actualizado","primary"),this.functionsService.navigateTo("core/salones/vista-salones"),this.offLoading()},i=>{this.functionsService.presentToast("bottom","Error","danger"),this.offLoading()})}setForm(i){this.salonForm=this.fb.group({nombre:[i.nombre,[r.kI.required]],direccion:[i.direccion,[r.kI.required]],lat:[i.lat],long:[i.long],telefono:[i.telefono,[r.kI.required]],activated:[i.activated],dateCreated:[i.dateCreated],lastEdited:[this.today]})}cambiarImagen(i){if(this.imagenSubir=i.target.files[0],i.target.files[0]){console.log("file::: ",i.target.files[0]);const t=new FileReader;t.readAsDataURL(i.target.files[0]),t.onloadend=()=>{this.imgTemp=t.result,console.log("this.imgTemp ::: ",this.imgTemp)},this.subirImagen()}else this.imgTemp=null,console.log("!file::: ",this.imgTemp)}subirImagen(){this.fileService.actualizarFoto(this.imagenSubir,"salones",this.salon.uid).then(i=>{this.salon.img=i,this.functionsService.presentToast("bottom","Imagen actualizada","success")},i=>{this.functionsService.presentToast("bottom","Error al actualizar la imagen","danger")})}back(){this.functionsService.navigateTo("core/salones/vista-salones")}onLoading(){var i=this;this.functionsService.showLoading().then(function(){var t=(0,u.Z)(function*(c){i.loading=c});return function(c){return t.apply(this,arguments)}}())}offLoading(){setTimeout(()=>{this.functionsService.closeLoading(this.loading)},500)}}return(o=a).\u0275fac=function(i){return new(i||o)(e.Y36(p.d),e.Y36(d.gz),e.Y36(h.S),e.Y36(r.qu),e.Y36(_.I))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-editar-salon"]],decls:28,vars:11,consts:[[3,"titulo"],[3,"fullscreen"],["novalidate","",3,"formGroup","ngSubmit"],["fixed","",1,"minHeight"],[1,"ion-text-center"],["size","12"],["lines","none"],["type","string","placeholder","Nombre(s)","name","nombre","label","Nombre","labelPlacement","floating","formControlName","nombre","required","",3,"readonly"],["size","12","size-md","6"],["type","string","placeholder","Direcci\xf3n","name","direccion","label","Direcci\xf3n","labelPlacement","floating","formControlName","direccion","required","",3,"readonly"],["type","number","placeholder","Tel\xe9fono","name","telefono","label","Tel\xe9fono","labelPlacement","floating","formControlName","telefono","required","",3,"readonly"],["type","number","placeholder","Latitud","name","lat","label","Latitud","labelPlacement","floating","formControlName","lat","required","",3,"readonly"],["type","number","placeholder","Longitud","name","long","label","Longitud","labelPlacement","floating","formControlName","long","required","",3,"readonly"],["size","12","size-md","6",4,"ngIf"],["fixed","",1,"ion-text-center"],["size","6"],["color","secondary","expand","block",1,"ion-padding","ion-no-border",3,"click"],["size","6",4,"ngIf"],["lines","none",1,"ion-text-center"],[1,"image-upload"],["for","file-input",2,"text-align","center"],[4,"ngIf"],["id","file-input","type","file",1,"ion-no-border",3,"change"],["alt","Click aqu\xed para subir tu foto","title","Click aqu\xed para subir tu foto","class","img-avatar",3,"src",4,"ngIf"],["class","img-avatar",3,"src","alt",4,"ngIf"],["alt","Click aqu\xed para subir tu foto","title","Click aqu\xed para subir tu foto",1,"img-avatar",3,"src"],[1,"img-avatar",3,"src","alt"],["id","file-input","type","file",1,"ion-no-border",3,"disabled","change"],["class","img-avatar",3,"src","alt","title",4,"ngIf"],[1,"img-avatar",3,"src","alt","title"],["color","primary","type","submit","expand","block",1,"ion-padding","ion-no-border",3,"disabled"]],template:function(i,t){1&i&&(e._UZ(0,"app-header",0),e.TgZ(1,"ion-content",1)(2,"form",2),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(3,"ion-grid",3)(4,"ion-row",4)(5,"ion-col",5)(6,"ion-item",6),e._UZ(7,"ion-input",7),e.qZA()(),e.TgZ(8,"ion-col",8)(9,"ion-item",6),e._UZ(10,"ion-input",9),e.qZA()(),e.TgZ(11,"ion-col",8)(12,"ion-item",6),e._UZ(13,"ion-input",10),e.qZA()(),e.TgZ(14,"ion-col",8)(15,"ion-item",6),e._UZ(16,"ion-input",11),e.qZA()(),e.TgZ(17,"ion-col",8)(18,"ion-item",6),e._UZ(19,"ion-input",12),e.qZA()(),e.YNc(20,Z,8,1,"ion-col",13),e.YNc(21,J,8,2,"ion-col",13),e.qZA()(),e.TgZ(22,"ion-grid",14)(23,"ion-row",4)(24,"ion-col",15)(25,"ion-button",16),e.NdJ("click",function(){return t.back()}),e._uU(26," Regresar "),e.qZA()(),e.YNc(27,P,3,1,"ion-col",17),e.qZA()()()()),2&i&&(e.Q6J("titulo","true"===t.edit?"Editar Salon":"Ver Salon"),e.xp6(1),e.Q6J("fullscreen",!0),e.xp6(1),e.Q6J("formGroup",t.salonForm),e.xp6(5),e.Q6J("readonly","false"===t.edit),e.xp6(3),e.Q6J("readonly","false"===t.edit),e.xp6(3),e.Q6J("readonly","false"===t.edit),e.xp6(3),e.Q6J("readonly","false"===t.edit),e.xp6(3),e.Q6J("readonly","false"===t.edit),e.xp6(1),e.Q6J("ngIf","true"===t.edit),e.xp6(1),e.Q6J("ngIf","false"===t.edit),e.xp6(6),e.Q6J("ngIf","true"===t.edit))},dependencies:[m.O5,r._Y,r.JJ,r.JL,r.Q7,s.YG,s.wI,s.W2,s.jY,s.pK,s.Ie,s.Q$,s.Nd,s.as,s.j9,r.sg,r.u,b.G]}),a})()}];let L=(()=>{var o;class a{}return(o=a).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.Bz.forChild(Q),d.Bz]}),a})();var N=l(4476),F=l(8554);let A=(()=>{var o;class a{}return(o=a).\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.ez,r.u5,s.Pc,L,r.UX,N.q,F.m]}),a})()}}]);