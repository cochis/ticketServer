"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9723],{9723:(J,g,r)=>{r.r(g),r.d(g,{CrearBoletoPageModule:()=>F});var u=r(6814),l=r(6223),a=r(9843),m=r(1896),p=r(5861),f=r(5803),e=r(5879),h=r(7203),v=r(8941),b=r(6942),C=r(8672),T=r(2363);function Z(t,s){if(1&t&&(e.TgZ(0,"h3",7),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij("Invitados ",n.total,"")}}function x(t,s){1&t&&(e.TgZ(0,"ion-text",18)(1,"h3"),e._uU(2,"Ya no tiene boletos disponibles "),e.qZA()())}function _(t,s){if(1&t&&(e.ynx(0),e.TgZ(1,"ion-select-option",19),e._uU(2),e.qZA(),e.BQk()),2&t){const n=s.$implicit;e.xp6(1),e.Q6J("value",n.uid),e.xp6(1),e.Oqu(n.nombre)}}function B(t,s){if(1&t&&(e.TgZ(0,"div")(1,"ion-select-option",19),e._uU(2),e.qZA()()),2&t){const n=s.$implicit;e.xp6(1),e.Q6J("value",n.uid),e.xp6(1),e.Oqu(n.nombre)}}function y(t,s){if(1&t){const n=e.EpF();e.ynx(0)(1,20),e.TgZ(2,"ion-col",21)(3,"ion-select",22),e.YNc(4,B,3,2,"div",11),e.qZA()(),e.TgZ(5,"ion-col",21),e._UZ(6,"ion-input",23),e.qZA(),e.TgZ(7,"ion-col",21),e._UZ(8,"ion-input",24),e.qZA(),e.TgZ(9,"ion-col",25),e._UZ(10,"ion-input",26),e.qZA(),e.TgZ(11,"ion-col",25),e._UZ(12,"ion-input",27),e.qZA(),e.TgZ(13,"ion-col",25)(14,"ion-button",28),e.NdJ("click",function(){const c=e.CHM(n).index,d=e.oxw();return e.KtG(d.openModal(d.registerForm.value.invitados[c]))}),e._UZ(15,"ion-icon",29),e.qZA()(),e.TgZ(16,"ion-col",25)(17,"ion-button",28),e.NdJ("click",function(){const c=e.CHM(n).index,d=e.oxw();return e.KtG(d.removeInvitados(c))}),e._UZ(18,"ion-icon",30),e.qZA()(),e.BQk()()}if(2&t){const n=s.index,o=e.oxw();e.xp6(1),e.Q6J("formGroupName",n),e.xp6(3),e.Q6J("ngForOf",o.tipoGrupos)}}const P=[{path:"",component:(()=>{var t;class s{constructor(o,i,c,d,G,N){this.functionsService=o,this.fb=i,this.boletosService=c,this.fiestasService=d,this.tipoGruposServices=G,this.modalCtrl=N,this.today=this.functionsService.getToday(),this.formSubmitted=!1,this.cargando=!1,this.numeroInvitados=0,this.sumaInvitados=0,this.message="This modal example uses the modalController to present and dismiss modals.",this.onLoading(),this.getFiestas(),this.getTipoGrupos(),this.createForm(),this.offLoading()}ngOnInit(){}getFiestas(){this.fiestasService.cargarFiestasAll().subscribe(o=>{this.fiestas=this.functionsService.getActives(o.fiestas),console.log("this.fiestas ::: ",this.fiestas)},o=>{console.log("error::: ",o)})}getTipoGrupos(){this.tipoGruposServices.cargarTipoGruposAll().subscribe(o=>{this.tipoGrupos=this.functionsService.getActives(o.tipoGrupos),console.log("this.tipoGrupos::: ",this.tipoGrupos)},o=>{console.log("error::: ",o)})}get errorControl(){return this.registerForm.controls}openModal(o){var i=this;return(0,p.Z)(function*(){const c=yield i.modalCtrl.create({component:f.h,componentProps:{invitado:o,fiesta:i.registerForm.value.fiesta}});c.present();const{data:d}=yield c.onWillDismiss();console.log("data::: ",d)})()}createForm(){this.cargando=!0,this.registerForm=this.fb.group({fiesta:["",[l.kI.required]],llena:[!1],invitados:this.fb.array([]),activated:[!1],dateCreated:[this.today],lastEdited:[this.today]}),this.cargando=!1}get invitados(){return this.registerForm.get("invitados")}newInvitado(){return this.fb.group({tipoGrupo:["",[l.kI.required]],nombreGrupo:["",[l.kI.required]],whatsapp:[""],email:[""],cantidad:["",l.kI.required],ocupados:[0]})}selectNumero(o){console.log("event::: ",o.target.value),this.numeroInvitados=this.functionsService.getValueCatalog(o.target.value,"cantidad",this.fiestas),console.log("his.numeroInvitados ::: ",this.numeroInvitados)}cuentaInvitados(o){this.numeroInvitados=this.numeroInvitados-Number(o.target.value)}addInvitados(){this.invitados.push(this.newInvitado())}removeInvitados(o){this.invitados.removeAt(o)}onSubmit(){if(this.onLoading(),!this.registerForm.valid)return this.functionsService.presentToast("bottom","Por favor completa el formulario","danger"),this.offLoading(),console.log("Please provide all the required values!");this.boletosService.crearBoleto(this.registerForm.value).subscribe(o=>{this.functionsService.presentToast("bottom","Boleto Creado","primary"),this.functionsService.navigateTo("core/boletos/vista-boletos"),this.offLoading()},o=>{this.functionsService.presentToast("bottom","Error","danger"),this.offLoading(),console.log("error::: ",o)})}onLoading(){var o=this;this.functionsService.showLoading().then(function(){var i=(0,p.Z)(function*(c){o.loading=c});return function(c){return i.apply(this,arguments)}}())}offLoading(){setTimeout(()=>{this.functionsService.closeLoading(this.loading)},500)}back(){this.functionsService.navigateTo("core/boletos/vista-boletos")}get total(){var o=0;return this.registerForm.value.invitados.forEach(i=>{o+=i.cantidad}),o}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(h.d),e.Y36(l.qu),e.Y36(v.s),e.Y36(b.O),e.Y36(C.w),e.Y36(a.IN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-crear-boleto"]],decls:28,vars:9,consts:[["titulo","Crear Boleto"],[3,"fullscreen"],["color","tertiary",1,"ion-text-center"],["class","ion-text-center",4,"ngIf"],["color","tertiary","class","ion-text-center","color","danger",4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],["fixed","",1,"minHeight"],[1,"ion-text-center"],["size","12","size-md","6"],["lines","none"],["label","Fiesta","placeholder","Selecciona la fiesta","formControlName","fiesta","required","",3,"ionChange"],[4,"ngFor","ngForOf"],[3,"disabled","click"],["formArrayName","invitados"],["fixed",""],["size","6"],["color","secondary","expand","block",1,"ion-padding","ion-no-border",3,"click"],["color","primary","type","submit","expand","block",1,"ion-padding","ion-no-border",3,"disabled"],["color","tertiary","color","danger",1,"ion-text-center"],[3,"value"],[3,"formGroupName"],["size","12","size-md","3",1,"ion-text-center"],["label","Tipo Grupo","labelPlacement","floating","placeholder","Selecciona El tipo de grupo","formControlName","tipoGrupo","required",""],["type","string","placeholder","Nombre Grupo","name","nombreGrupo","label","Nombre del grupo","labelPlacement","floating","formControlName","nombreGrupo","required","",1,"upperC"],["type","number","placeholder","Cantidad","name","cantidad","label","Cantidad de invitados","labelPlacement","floating","formControlName","cantidad","required",""],["size","12","size-md","6",1,"ion-text-center"],["type","string","placeholder","Correo","name","email","label","Correo electr\xf3nico","labelPlacement","floating","formControlName","email","required","",1,"upperC"],["type","number","placeholder","Tel\xe9fono","name","whatsapp","label","Tel\xe9fono","labelPlacement","floating","formControlName","whatsapp","required","",1,"upperC"],[3,"click"],["name","eye-outline"],["name","trash-bin-outline"]],template:function(o,i){1&o&&(e._UZ(0,"app-header",0),e.TgZ(1,"ion-content",1)(2,"ion-text",2)(3,"h3"),e._uU(4),e.qZA(),e.YNc(5,Z,2,1,"h3",3),e.qZA(),e.YNc(6,x,3,0,"ion-text",4),e.TgZ(7,"form",5),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(8,"ion-grid",6)(9,"ion-row",7)(10,"ion-col",8)(11,"ion-item",9)(12,"ion-select",10),e.NdJ("ionChange",function(d){return i.selectNumero(d)}),e.YNc(13,_,3,2,"ng-container",11),e.qZA()()(),e.TgZ(14,"ion-col",8)(15,"ion-button",12),e.NdJ("click",function(){return i.addInvitados()}),e._uU(16,"Agregar invitados"),e.qZA()()(),e.TgZ(17,"ion-row"),e.ynx(18,13),e.YNc(19,y,19,2,"ng-container",11),e.BQk(),e.qZA()(),e.TgZ(20,"ion-grid",14)(21,"ion-row",7)(22,"ion-col",15)(23,"ion-button",16),e.NdJ("click",function(){return i.back()}),e._uU(24," Regresar "),e.qZA()(),e.TgZ(25,"ion-col",15)(26,"ion-button",17),e._uU(27," Crear "),e.qZA()()()()()()),2&o&&(e.xp6(1),e.Q6J("fullscreen",!0),e.xp6(3),e.hij("Cantidad de invitaciones: ",i.numeroInvitados," "),e.xp6(1),e.Q6J("ngIf",i.registerForm.value.invitados.length>0),e.xp6(1),e.Q6J("ngIf",i.numeroInvitados<i.total),e.xp6(1),e.Q6J("formGroup",i.registerForm),e.xp6(6),e.Q6J("ngForOf",i.fiestas),e.xp6(2),e.Q6J("disabled",0===i.numeroInvitados),e.xp6(4),e.Q6J("ngForOf",i.invitados.controls),e.xp6(7),e.Q6J("disabled",i.registerForm.invalid))},dependencies:[u.sg,u.O5,l._Y,l.JJ,l.JL,l.Q7,a.YG,a.wI,a.W2,a.jY,a.gu,a.pK,a.Ie,a.Nd,a.t9,a.n0,a.yW,a.as,a.QI,a.j9,l.sg,l.u,l.x0,l.CE,T.G]}),s})()}];let I=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.Bz.forChild(P),m.Bz]}),s})();var S=r(4476),A=r(8554);let F=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez,l.u5,a.Pc,I,l.UX,S.q,A.m]}),s})()}}]);