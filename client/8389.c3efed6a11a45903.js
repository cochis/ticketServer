"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8389],{8389:(C,u,n)=>{n.r(u),n.d(u,{EditarRolPageModule:()=>I});var m=n(6814),i=n(6223),a=n(9843),c=n(4828),h=n(5861),e=n(5879),g=n(7203),f=n(8042),p=n(4726),v=n(2363);function b(o,s){if(1&o&&(e.TgZ(0,"ion-col",10)(1,"ion-button",13),e._uU(2," Editar "),e.qZA()()),2&o){const l=e.oxw();e.xp6(1),e.Q6J("disabled",l.roleForm.invalid)}}const y=[{path:"",component:(()=>{var o;class s{constructor(t,r,d,L,P,T){this.functionsService=t,this.route=r,this.fb=d,this.router=L,this.rolesService=P,this.fileService=T,this.today=this.functionsService.getToday(),this.formSubmitted=!1,this.cargando=!1,this.imgTemp=void 0,this.createForm(),this.id=this.route.snapshot.params.id,this.edit=this.route.snapshot.params.edit,this.getId(this.id),this.offLoading()}ngOnInit(){}getId(t){this.rolesService.cargarRoleById(t).subscribe(r=>{this.onLoading(),console.log("resp::: ",r),this.rol=r.role,this.setForm(this.rol),this.offLoading()},r=>{this.offLoading(),console.log("error::: ",r)})}createForm(){this.roleForm=this.fb.group({nombre:["",[i.kI.required,i.kI.minLength(3)]],clave:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(8)]],activated:[!1],dateCreated:[this.today],lastEdited:[this.today]})}setForm(t){console.log("rol::: ",t),this.roleForm=this.fb.group({nombre:[t.nombre,[i.kI.required,i.kI.minLength(3)]],clave:[t.clave,[i.kI.required,i.kI.minLength(8),i.kI.maxLength(8)]],activated:[t.activated],dateCreated:[t.dateCreated],lastEdited:[this.today]})}onSubmit(){if(this.onLoading(),!this.roleForm.valid)return this.functionsService.presentToast("bottom","Por favor completa el formulario","danger"),void this.offLoading();this.rol={...this.rol,...this.roleForm.value},this.rol.nombre=this.rol.nombre.toUpperCase(),this.rol.clave=this.rol.clave.toUpperCase(),this.rolesService.actualizarRole(this.rol).subscribe(t=>{this.functionsService.presentToast("bottom","Rol Actualizado","primary"),this.functionsService.navigateTo("core/roles/vista-roles"),this.offLoading()},t=>{this.functionsService.presentToast("bottom","Error","danger"),this.offLoading()})}back(){this.functionsService.navigateTo("core/roles/vista-roles")}onLoading(){var t=this;this.functionsService.showLoading().then(function(){var r=(0,h.Z)(function*(d){t.loading=d});return function(d){return r.apply(this,arguments)}}())}offLoading(){setTimeout(()=>{this.functionsService.closeLoading(this.loading)},500)}}return(o=s).\u0275fac=function(t){return new(t||o)(e.Y36(g.d),e.Y36(c.gz),e.Y36(i.qu),e.Y36(c.F0),e.Y36(f.f),e.Y36(p.I))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-editar-rol"]],decls:17,vars:6,consts:[[3,"titulo"],[3,"fullscreen"],["novalidate","",3,"formGroup","ngSubmit"],["fixed","",1,"minHeight"],[1,"ion-text-center"],["size","12","size-md","6"],["lines","none"],["type","string","placeholder","Nombre","name","nombre","label","Nombre","labelPlacement","floating","formControlName","nombre","required","",1,"upperC",3,"readonly"],["type","string","placeholder","Clave","name","clave","label","Clave","labelPlacement","floating","formControlName","clave","required","",1,"upperC",3,"readonly"],["fixed","",1,"ion-text-center"],["size","6"],["color","secondary","expand","block",1,"ion-padding","ion-no-border",3,"click"],["size","6",4,"ngIf"],["color","primary","type","submit","expand","block",1,"ion-padding","ion-no-border",3,"disabled"]],template:function(t,r){1&t&&(e._UZ(0,"app-header",0),e.TgZ(1,"ion-content",1)(2,"form",2),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(3,"ion-grid",3)(4,"ion-row",4)(5,"ion-col",5)(6,"ion-item",6),e._UZ(7,"ion-input",7),e.qZA()(),e.TgZ(8,"ion-col",5)(9,"ion-item",6),e._UZ(10,"ion-input",8),e.qZA()()()(),e.TgZ(11,"ion-grid",9)(12,"ion-row",4)(13,"ion-col",10)(14,"ion-button",11),e.NdJ("click",function(){return r.back()}),e._uU(15," Regresar "),e.qZA()(),e.YNc(16,b,3,1,"ion-col",12),e.qZA()()()()),2&t&&(e.Q6J("titulo","true"===r.edit?"Editar usuario":"Ver usuario"),e.xp6(1),e.Q6J("fullscreen",!0),e.xp6(1),e.Q6J("formGroup",r.roleForm),e.xp6(5),e.Q6J("readonly","false"===r.edit),e.xp6(3),e.Q6J("readonly","false"===r.edit),e.xp6(6),e.Q6J("ngIf","true"===r.edit))},dependencies:[m.O5,i._Y,i.JJ,i.JL,i.Q7,a.YG,a.wI,a.W2,a.jY,a.pK,a.Ie,a.Nd,a.j9,i.sg,i.u,v.G]}),s})()}];let R=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.Bz.forChild(y),c.Bz]}),s})();var S=n(4476),E=n(8554);let I=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.ez,i.u5,a.Pc,R,i.UX,S.q,E.m]}),s})()}}]);