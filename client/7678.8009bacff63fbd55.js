"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7678],{7678:(C,g,r)=>{r.r(g),r.d(g,{EditarSalonPageModule:()=>F});var m=r(6814),l=r(6223),s=r(9843),d=r(4828),u=r(5861),o=r(5879),f=r(7203),p=r(3429),h=r(4726),_=r(2363);function b(e,a){if(1&e&&o._UZ(0,"img",25),2&e){const t=o.oxw(3);o.Q6J("src","http://localhost:3006/api/upload/salones/default.jpg"+t.salon.img,o.LSH)}}function S(e,a){if(1&e&&o._UZ(0,"img",25),2&e){const t=o.oxw(3);o.Q6J("src","http://localhost:3006/api/upload/salones/"+t.salon.img,o.LSH)}}function v(e,a){if(1&e&&o._UZ(0,"img",26),2&e){const t=o.oxw(3);o.Q6J("src",t.imgTemp,o.LSH)("alt",t.salon.nombre)}}function x(e,a){if(1&e&&(o.ynx(0),o.YNc(1,b,1,1,"img",23),o.YNc(2,S,1,1,"img",23),o.YNc(3,v,1,2,"img",24),o.BQk()),2&e){const t=o.oxw(2);o.xp6(1),o.Q6J("ngIf",""===t.salon.img&&!t.imgTemp),o.xp6(1),o.Q6J("ngIf",""!==t.salon.img&&!t.imgTemp),o.xp6(1),o.Q6J("ngIf",""!==t.salon.img&&t.imgTemp)}}function T(e,a){if(1&e){const t=o.EpF();o.TgZ(0,"ion-col",8)(1,"ion-item",18)(2,"div",19)(3,"ion-label"),o._uU(4,"Imagen"),o.qZA(),o.TgZ(5,"label",20),o.YNc(6,x,4,3,"ng-container",21),o.qZA(),o.TgZ(7,"input",22),o.NdJ("change",function(i){o.CHM(t);const c=o.oxw();return o.KtG(c.cambiarImagen(i))}),o.qZA()()()()}if(2&e){const t=o.oxw();o.xp6(6),o.Q6J("ngIf",t.salon)}}function Z(e,a){if(1&e&&o._UZ(0,"img",29),2&e){const t=o.oxw(3);o.Q6J("src","http://localhost:3006/api/upload/salones/"+t.salon.img,o.LSH)("alt",t.salon.nombre)("title",t.salon.nombre)}}function E(e,a){if(1&e&&o._UZ(0,"img",29),2&e){const t=o.oxw(3);o.Q6J("src","http://localhost:3006/api/upload/salones/default.jpg",o.LSH)("alt",t.salon.nombre)("title",t.salon.nombre)}}function y(e,a){if(1&e&&(o.ynx(0),o.YNc(1,Z,1,3,"img",28),o.YNc(2,E,1,3,"img",28),o.BQk()),2&e){const t=o.oxw(2);o.xp6(1),o.Q6J("ngIf",""!==t.salon.img),o.xp6(1),o.Q6J("ngIf",""===t.salon.img)}}function I(e,a){if(1&e){const t=o.EpF();o.TgZ(0,"ion-col",8)(1,"ion-item",18)(2,"div",19)(3,"ion-label"),o._uU(4,"Imagen"),o.qZA(),o.TgZ(5,"label",20),o.YNc(6,y,3,2,"ng-container",21),o.qZA(),o.TgZ(7,"input",27),o.NdJ("change",function(i){o.CHM(t);const c=o.oxw();return o.KtG(c.cambiarImagen(i))}),o.qZA()()()()}if(2&e){const t=o.oxw();o.xp6(6),o.Q6J("ngIf",t.salon),o.xp6(1),o.Q6J("disabled","false"===t.edit)}}function J(e,a){if(1&e&&(o.TgZ(0,"ion-col",15)(1,"ion-button",30),o._uU(2," Editar "),o.qZA()()),2&e){const t=o.oxw();o.xp6(1),o.Q6J("disabled",t.salonForm.invalid)}}const P=[{path:"",component:(()=>{var e;class a{constructor(n,i,c,q,A){this.functionsService=n,this.route=i,this.salonsService=c,this.fb=q,this.fileService=A,this.today=this.functionsService.getToday(),this.formSubmitted=!1,this.cargando=!1,this.imgTemp=void 0,this.createForm(),this.id=this.route.snapshot.params.id,this.edit=this.route.snapshot.params.edit,this.getId(this.id),this.offLoading()}ngOnInit(){}getId(n){this.salonsService.cargarSalonById(n).subscribe(i=>{this.onLoading(),this.salon=i.salon,this.setForm(this.salon),this.offLoading()},i=>{this.offLoading()})}get errorControl(){return this.salonForm.controls}createForm(){this.salonForm=this.fb.group({nombre:["",[l.kI.required]],direccion:["",[l.kI.required]],lat:[""],long:[""],telefono:[0,[l.kI.required]],activated:[!1],dateCreated:[this.today],lastEdited:[this.today]})}onSubmit(){if(this.onLoading(),!this.salonForm.valid)return this.functionsService.presentToast("bottom","Por favor completa el formulario","danger"),void this.offLoading();this.salon={...this.salon,...this.salonForm.value},console.log("this.salon::: ",this.salon),this.salonsService.actualizarSalon(this.salon).subscribe(n=>{this.functionsService.presentToast("bottom","Salon Actualizado","primary"),this.functionsService.navigateTo("core/salones/vista-salones"),this.offLoading()},n=>{this.functionsService.presentToast("bottom","Error","danger"),this.offLoading()})}setForm(n){this.salonForm=this.fb.group({nombre:[n.nombre,[l.kI.required]],direccion:[n.direccion,[l.kI.required]],lat:[n.lat],long:[n.long],telefono:[n.telefono,[l.kI.required]],activated:[n.activated],dateCreated:[n.dateCreated],lastEdited:[this.today]})}cambiarImagen(n){if(this.imagenSubir=n.target.files[0],n.target.files[0]){console.log("file::: ",n.target.files[0]);const i=new FileReader;i.readAsDataURL(n.target.files[0]),i.onloadend=()=>{this.imgTemp=i.result,console.log("this.imgTemp ::: ",this.imgTemp)},this.subirImagen()}else this.imgTemp=null,console.log("!file::: ",this.imgTemp)}subirImagen(){this.fileService.actualizarFoto(this.imagenSubir,"salones",this.salon.uid).then(n=>{this.salon.img=n,this.functionsService.presentToast("bottom","Imagen actualizada","success")},n=>{this.functionsService.presentToast("bottom","Error al actualizar la imagen","danger")})}back(){this.functionsService.navigateTo("core/salones/vista-salones")}onLoading(){var n=this;this.functionsService.showLoading().then(function(){var i=(0,u.Z)(function*(c){n.loading=c});return function(c){return i.apply(this,arguments)}}())}offLoading(){setTimeout(()=>{this.functionsService.closeLoading(this.loading)},500)}}return(e=a).\u0275fac=function(n){return new(n||e)(o.Y36(f.d),o.Y36(d.gz),o.Y36(p.S),o.Y36(l.qu),o.Y36(h.I))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-editar-salon"]],decls:28,vars:11,consts:[[3,"titulo"],[3,"fullscreen"],["novalidate","",3,"formGroup","ngSubmit"],["fixed","",1,"minHeight"],[1,"ion-text-center"],["size","12"],["lines","none"],["type","string","placeholder","Nombre(s)","name","nombre","label","Nombre","labelPlacement","floating","formControlName","nombre","required","",3,"readonly"],["size","12","size-md","6"],["type","string","placeholder","Direcci\xf3n","name","direccion","label","Direcci\xf3n","labelPlacement","floating","formControlName","direccion","required","",3,"readonly"],["type","number","placeholder","Tel\xe9fono","name","telefono","label","Tel\xe9fono","labelPlacement","floating","formControlName","telefono","required","",3,"readonly"],["type","number","placeholder","Latitud","name","lat","label","Latitud","labelPlacement","floating","formControlName","lat","required","",3,"readonly"],["type","number","placeholder","Longitud","name","long","label","Longitud","labelPlacement","floating","formControlName","long","required","",3,"readonly"],["size","12","size-md","6",4,"ngIf"],["fixed","",1,"ion-text-center"],["size","6"],["color","secondary","expand","block",1,"ion-padding","ion-no-border",3,"click"],["size","6",4,"ngIf"],["lines","none",1,"ion-text-center"],[1,"image-upload"],["for","file-input",2,"text-align","center"],[4,"ngIf"],["id","file-input","type","file",1,"ion-no-border",3,"change"],["alt","Click aqu\xed para subir tu foto","title","Click aqu\xed para subir tu foto","class","img-avatar",3,"src",4,"ngIf"],["class","img-avatar",3,"src","alt",4,"ngIf"],["alt","Click aqu\xed para subir tu foto","title","Click aqu\xed para subir tu foto",1,"img-avatar",3,"src"],[1,"img-avatar",3,"src","alt"],["id","file-input","type","file",1,"ion-no-border",3,"disabled","change"],["class","img-avatar",3,"src","alt","title",4,"ngIf"],[1,"img-avatar",3,"src","alt","title"],["color","primary","type","submit","expand","block",1,"ion-padding","ion-no-border",3,"disabled"]],template:function(n,i){1&n&&(o._UZ(0,"app-header",0),o.TgZ(1,"ion-content",1)(2,"form",2),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o.TgZ(3,"ion-grid",3)(4,"ion-row",4)(5,"ion-col",5)(6,"ion-item",6),o._UZ(7,"ion-input",7),o.qZA()(),o.TgZ(8,"ion-col",8)(9,"ion-item",6),o._UZ(10,"ion-input",9),o.qZA()(),o.TgZ(11,"ion-col",8)(12,"ion-item",6),o._UZ(13,"ion-input",10),o.qZA()(),o.TgZ(14,"ion-col",8)(15,"ion-item",6),o._UZ(16,"ion-input",11),o.qZA()(),o.TgZ(17,"ion-col",8)(18,"ion-item",6),o._UZ(19,"ion-input",12),o.qZA()(),o.YNc(20,T,8,1,"ion-col",13),o.YNc(21,I,8,2,"ion-col",13),o.qZA()(),o.TgZ(22,"ion-grid",14)(23,"ion-row",4)(24,"ion-col",15)(25,"ion-button",16),o.NdJ("click",function(){return i.back()}),o._uU(26," Regresar "),o.qZA()(),o.YNc(27,J,3,1,"ion-col",17),o.qZA()()()()),2&n&&(o.Q6J("titulo","true"===i.edit?"Editar Salon":"Ver Salon"),o.xp6(1),o.Q6J("fullscreen",!0),o.xp6(1),o.Q6J("formGroup",i.salonForm),o.xp6(5),o.Q6J("readonly","false"===i.edit),o.xp6(3),o.Q6J("readonly","false"===i.edit),o.xp6(3),o.Q6J("readonly","false"===i.edit),o.xp6(3),o.Q6J("readonly","false"===i.edit),o.xp6(3),o.Q6J("readonly","false"===i.edit),o.xp6(1),o.Q6J("ngIf","true"===i.edit),o.xp6(1),o.Q6J("ngIf","false"===i.edit),o.xp6(6),o.Q6J("ngIf","true"===i.edit))},dependencies:[m.O5,l._Y,l.JJ,l.JL,l.Q7,s.YG,s.wI,s.W2,s.jY,s.pK,s.Ie,s.Q$,s.Nd,s.as,s.j9,l.sg,l.u,_.G]}),a})()}];let Q=(()=>{var e;class a{}return(e=a).\u0275fac=function(n){return new(n||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[d.Bz.forChild(P),d.Bz]}),a})();var L=r(4476),N=r(8554);let F=(()=>{var e;class a{}return(e=a).\u0275fac=function(n){return new(n||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[m.ez,l.u5,s.Pc,Q,l.UX,L.q,N.m]}),a})()}}]);